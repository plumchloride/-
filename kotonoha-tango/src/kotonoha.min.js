const a_csv_version="5.2.2",q_csv_version="5.2.2",q_csv_path="./public/data/Q_fil_ippan.csv?ver=5.2.2",a_csv_path="./public/data/A_data_new.csv?ver=5.2.2",h_csv_path="https://plum-chloride.jp/kotonoha-tango/public/data/history.csv?ver=",KEYBORD_LIST=[["ワ","ラ","ヤ","マ","ハ","ナ","タ","サ","カ","ア"],["ヲ","リ","　","ミ","ヒ","ニ","チ","シ","キ","イ"],["ン","ル","ユ","ム","フ","ヌ","ツ","ス","ク","ウ"],["　","レ","　","メ","ヘ","ネ","テ","セ","ケ","エ"],["　","ロ","ヨ","モ","ホ","ノ","ト","ソ","コ","オ"],["ー","　","ャ","パ","バ","　","ダ","ザ","ガ","ァ"],["　","　","　","ピ","ビ","　","ヂ","ジ","ギ","ィ"],["　","　","ュ","プ","ブ","ッ","ヅ","ズ","グ","ゥ"],["del","　","　","ペ","ベ","　","デ","ゼ","ゲ","ェ"],["←","→","ョ","ポ","ボ","　","ド","ゾ","ゴ","ォ"]],hiragana=["あ","い","う","え","お","か","き","く","け","こ","さ","し","す","せ","そ","た","ち","つ","て","と","な","に","ぬ","ね","の","は","ひ","ふ","へ","ほ","ま","み","む","め","も","や","ゆ","よ","ら","り","る","れ","ろ","わ","を","ん","が","ぎ","ぐ","げ","ご","ざ","じ","ず","ぜ","ぞ","だ","ぢ","づ","で","ど","ば","び","ぶ","べ","ぼ","ぱ","ぴ","ぷ","ぺ","ぽ","ぁ","ぃ","ぅ","ぇ","ぉ","っ","ゃ","ゅ","ょ","ー"],katakana=["ア","イ","ウ","エ","オ","カ","キ","ク","ケ","コ","サ","シ","ス","セ","ソ","タ","チ","ツ","テ","ト","ナ","ニ","ヌ","ネ","ノ","ハ","ヒ","フ","ヘ","ホ","マ","ミ","ム","メ","モ","ヤ","ユ","ヨ","ラ","リ","ル","レ","ロ","ワ","ヲ","ン","ガ","ギ","グ","ゲ","ゴ","ザ","ジ","ズ","ゼ","ゾ","ダ","ヂ","ヅ","デ","ド","バ","ビ","ブ","ベ","ボ","パ","ピ","プ","ペ","ポ","ァ","ィ","ゥ","ェ","ォ","ッ","ャ","ュ","ョ","ー"];let csv_data={q_data:{},a_data:[]},filter_array=[],game_data={now_solve:{index:0,row:0},anser:["　","　","　","　","　"]},history={anser:[],hb:[],hb_text:{hit:[],blow:[],all:[]},remain:[],game:{try_count:0,win_count:0,current_streak:0,max_streak:0,history:[0,0,0,0,0,0,0,0,0,0]}},tango={kanzi:"=====",yomi:"====="},daily_data={pass_day:0},wakeup_number=0,flag={wakeup:!1,game_end:!1,game_win:!1,remain_show:!0,lang_en:!1},icon_src={hatena:"./public/img/hatena.svg",bar:"./public/img/bar_graph.svg",set:"./public/img/set.svg",batu:"./public/img/x.svg"},display_mode="",HTML_element={remain_toggle:document.getElementById("remain_toggle_input"),emoji_place:document.getElementById("emoji_place"),input_text:document.getElementById("input_text"),remain:document.getElementById("remain_num"),remain_toggle_text:document.getElementById("remain_unvisi"),display_mode:{body:document.getElementById("body"),hatena:document.getElementById("hatena"),bar:document.getElementById("graph"),set:document.getElementById("setting")},icon_btn:{hatena:document.getElementById("img_hatena"),bar:document.getElementById("img_bar_graph"),set:document.getElementById("img_setting")}},myChart="A",curent_key_type="all",current_color=["rgb(167,210,141)","rgb(252, 201, 72)"],none_re_array=[],reload=!1,KeybordButton_Mode="input",Assumption_word={hit:[],none:[]};const Progress=()=>{switch(wakeup_number){case 1:WakeUpRequest(a_csv_path,"A");break;case 2:filter_array=Array.from(new Set([...csv_data.a_data])),csv_data.a_data=Array.from(new Set([...csv_data.a_data])),GetTodayWord();break;case 3:CreateKeybord();break;case 4:CreateDisplay();break;case 5:BeforeDataCheck();break;case 6:TodayDataCheck();break;case 7:GetYesterdayTango();break;case 8:let nowtime=new Date;WakeUpRequest(h_csv_path+String(nowtime.getHours())+String(nowtime.getMinutes()),"H");break;case 9:setInterval(DisplayTime,1e3),flag.wakeup=!0;break;default:alert("ERROR2:\n wakeup number is invalid"),location.reload()}},WakeUpRequest=(path,mode)=>{var _request=new XMLHttpRequest;_request.addEventListener("load",event=>{const response=event.target.responseText;LoadData(mode,response)}),_request.open("GET",path,!0),_request.send()},LoadData=(mode,data)=>{switch(mode){case"A":var _array_sp_n=[];_array_sp_n=data.split(/\r\n|\n/),SaveArray(_array_sp_n,mode);break;case"Q":var _array={title:[],pronunciation:[]},_array_sp_n=[];(_array_sp_n=data.split(/\r\n|\n/)).forEach(element=>{var _row=element.split(",");_array.title.push(_row[0]),_array.pronunciation.push(_row[1])}),SaveArray(_array,mode);break;case"H":var $h_out=document.getElementById("h_csv"),sum=(accumulator,curr)=>Number(accumulator)+Number(curr);(_array_sp_n=data.split(/\r\n|\n/)).forEach(element=>{var _row=element.split(",");""!=_row[0]&""!=_row&&_row[0]==String(daily_data.pass_day)&&($h_out.innerText=`全ユーザーの正答率：${Math.floor(1e4*(1-Number(_row[11])/_row.slice(1,12).reduce(sum)))/100}%`)}),wakeup_number+=1,Progress();break;default:alert("ERROR1:\n csvmode is invalid"),location.reload()}},SaveArray=(data,mode,env)=>{switch(mode){case"A":csv_data.a_data=data,wakeup_number+=1,Progress();break;case"Q":csv_data.q_data=data,wakeup_number+=1,Progress();break;default:alert("ERROR1:\n csvmode is invalid"),location.reload()}};class Random{constructor(seed,x){this.x=x,this.y=4120343,this.z=856135,this.w=seed}next(){const t=this.x^this.x<<11;return this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>>19^t^t>>>8}nextInt(min,max){const r=Math.abs(this.next());return min+r%(max+1-min)}}const GetRandom=Q_data=>{let fday,fday_diff,timestamp=luxon.DateTime.fromSQL("2022-01-21").diffNow("days").days,nowtime=new Date,pass_day=Math.floor(-1*timestamp),year=parseInt(String(nowtime.getFullYear())),month=parseInt(String(nowtime.getMonth())),day=parseInt(String(nowtime.getDate())),seed,rand,random_num;return[new Random(year+801*month+13*day,2001*day).nextInt(0,Q_data.title.length),pass_day]},GetTodayWord=()=>{let[random_num,passday]=GetRandom(csv_data.q_data),title=csv_data.q_data.title[random_num],pronunciation=csv_data.q_data.pronunciation[random_num];tango.kanzi=title,tango.yomi=pronunciation,daily_data.pass_day=passday,wakeup_number+=1,Progress()},GetRandom_before=()=>{let b_nowtime=new Date,b_yes_time=new Date(b_nowtime.setDate(b_nowtime.getDate()-1)),b_year=parseInt(String(b_yes_time.getFullYear())),b_month=parseInt(String(b_yes_time.getMonth())),b_day=parseInt(String(b_yes_time.getDate())),b_seed,b_rand,b_random_num;return new Random(b_year+801*b_month+13*b_day,2001*b_day).nextInt(0,csv_data.q_data.title.length)},GetYesterdayTango=()=>{let random_num=GetRandom_before(),b_title=csv_data.q_data.title[random_num],b_pronunciation=csv_data.q_data.pronunciation[random_num];document.getElementById("before_tango").innerText=`「${b_title}」（${b_pronunciation}）`,wakeup_number+=1,Progress()},GetHistoryData=()=>{},CheckRemaining_all=(progress_re=!1)=>{if(!filter_array|0==filter_array.length)alertShow("バグです。プレイは可能ですが動作に一部影響が出ています。\n Error3: The number of remaining words is not defined",2e3);else{var history_of_hb_text=history.hb_text,history_of_hb=history.hb,history_of_anser=history.anser;history_of_hb_text.hit.forEach(element=>{0!=history_of_hb_text.blow.length&history_of_hb_text.blow.includes(element)&&history_of_hb_text.blow.splice(history_of_hb_text.blow.indexOf(element),1)});var _none_array_before=[];history_of_hb_text.all.forEach(e=>{none_re_array.includes(e)||_none_array_before.push(e)}),_none_array_before.forEach(e=>{filter_array=filter_array.filter(word=>!word.includes(e))}),none_re_array.push(..._none_array_before),history_of_hb_text.blow.forEach(e=>{filter_array=filter_array.filter(word=>word.includes(e))}),history_of_hb_text.hit.forEach(e=>{filter_array=filter_array.filter(word=>word.includes(e))}),history_of_hb.forEach((element,index)=>{hit_blow_list=[],element.forEach((e,index2)=>{"BLOW"==e?(filter_array=filter_array.filter(word=>history_of_anser[index][index2]!=word[index2]),hit_blow_list.includes(history_of_anser[index][index2])&&(filter_array=filter_array.filter(word=>word.indexOf(history_of_anser[index][index2])!=word.lastIndexOf(history_of_anser[index][index2]))),hit_blow_list.push(history_of_anser[index][index2])):"NO"==e&history_of_hb_text.blow.includes(history_of_anser[index][index2])?filter_array=filter_array.filter(word=>history_of_anser[index][index2]!=word[index2]):"HIT"==e?(filter_array=filter_array.filter(word=>history_of_anser[index][index2]==word[index2]),hit_blow_list.includes(history_of_anser[index][index2])&&(filter_array=filter_array.filter(word=>word.indexOf(history_of_anser[index][index2])!=word.lastIndexOf(history_of_anser[index][index2]))),hit_blow_list.push(history_of_anser[index][index2])):"NO"==e&history_of_hb_text.hit.includes(history_of_anser[index][index2])&&(filter_array=filter_array.filter(word=>history_of_anser[index][index2]!=word[index2]))})}),RemainShow(filter_array.length),progress_re&&(history.remain.push(filter_array.length),localStorage.setItem("remain",JSON.stringify(history.remain)))}},BeforeDataCheck=()=>{if(localStorage.getItem("experience")){if(daily_data.pass_day-localStorage.getItem("pass_day")>30)return;mode_change("game")}null!=localStorage.getItem("history_of_game")&&(history.game=JSON.parse(localStorage.getItem("history_of_game"))),ShowHistory(history.game),null==localStorage.getItem("lang")?localStorage.setItem("lang",flag.lang_en):localStorage.getItem("lang")|"true"==localStorage.getItem("lang")&&changeLang(),null==localStorage.getItem("color")?(localStorage.setItem("color",JSON.stringify(current_color)),ChangeColor(...current_color)):(current_color=JSON.parse(localStorage.getItem("color")),ChangeColor(...current_color)),wakeup_number+=1,Progress()},TodayDataCheck=()=>{if(localStorage.getItem("pass_day")==daily_data.pass_day){game_data.now_solve=JSON.parse(localStorage.getItem("now_solve")),history.hb_text=JSON.parse(localStorage.getItem("history_of_hb_text")),history.hb=JSON.parse(localStorage.getItem("history_of_hb")),history.anser=JSON.parse(localStorage.getItem("history_of_anser"));var ls_flag=JSON.parse(localStorage.getItem("flag"));flag.game_end=ls_flag.game_end,flag.game_win=ls_flag.game_win,flag.remain_show=ls_flag.remain_show,null!=JSON.parse(localStorage.getItem("tango"))&&JSON.parse(localStorage.getItem("tango")).yomi!=tango.yomi&&(tango=JSON.parse(localStorage.getItem("tango")),alertShow("バグです。プレイは可能ですが動作に一部影響が出ています。\n Error5: The saved word and the retrieved word are different.",2e3)),0!=history.hb.length&&(0!=history.hb[history.hb.length-1].length&history.hb[history.hb.length-1].every(n=>"HIT"==n)&!flag.game_end?(alertShow("バグですが動作に問題はありません。\n 戦歴が増加している可能性があります。 \n Error8: flag is not set.[true]",2e3),flag.game_end=!0,flag.game_win=!0,"false"==localStorage.getItem("bf_error8")?localStorage.setItem("bf_error8",!0):localStorage.setItem("flag",JSON.stringify({game_end:flag.game_end,game_win:flag.game_win,remain_show:flag.remain_show}))):10==history.hb.length&!flag.game_end&&(alertShow("バグですが動作に問題はありません。\n 戦歴が増加している可能性があります。 \n Error8: flag is not set.[false]",2e3),flag.game_end=!0,flag.game_win=!1,"false"==localStorage.getItem("bf_error8")?localStorage.setItem("bf_error8",!0):localStorage.setItem("flag",JSON.stringify({game_end:flag.game_end,game_win:flag.game_win,remain_show:flag.remain_show})))),null!=localStorage.getItem("remain")&&(history.remain=JSON.parse(localStorage.getItem("remain"))),null!=localStorage.getItem("Assumption_word")&&(Assumption_word=JSON.parse(localStorage.getItem("Assumption_word")),Assumption_word.hit.forEach(element=>{document.getElementById("btn_"+element).classList.add("AssumptionHit")}),Assumption_word.none.forEach(element=>{document.getElementById("btn_"+element).classList.add("AssumptionNone")}));for(let i=0;i<game_data.now_solve.row;i++)EvaluateUpdate(i,0,!1,!1);ValueUpdate(),DisplayUpdate(),flag.game_end&&End()}else RemainShow(filter_array.length),DisplayUpdate();wakeup_number+=1,Progress()};document.getElementById("tango_input").addEventListener("submit",e=>{if(!flag.game_end){var check=!1;if(!flag.wakeup)return alert("バグ、もしくは不正な操作です。リロードします。\n Error1: Not wake up wakeupnum:"+String(wakeup_number)),check=!0,void location.reload();if(5!=game_data.anser.length)return alert("バグ、もしくは不正な操作です。リロードします。\n Error2: The length of the entered character is incorrect"),check=!0,void location.reload();game_data.anser.forEach(element=>{if(!(hiragana.includes(element)|katakana.includes(element)))return flag.lang_en?alertShow("Attention\nNot enough letter or use only (hiragana or katakana)",2e3):alertShow("注意\n入力した「たんご」はひらがな・カタカナの5文字のみです",2e3),void(check=!0)});var kotonoha=game_data.anser.toString().replace(/,/g,"");if(!check){if(!csv_data.a_data.includes(kotonoha))return flag.lang_en?alertShow("Attention\nNot in the dictionary of this app)",2e3):alertShow("注意\nことのは（本アプリの辞書内の単語）を記入して下さい",2e3),void(check=!0);if(!check){var hb_yomi=tango.yomi.split(""),h_word=[],b_word=[],not_word=[],hb_list=["NO","NO","NO","NO","NO"],hit_count=0;game_data.anser.forEach((element,index)=>{element==hb_yomi[index]?(h_word.push(element),hb_list[index]="HIT",hit_count+=1):hb_yomi.includes(element)?(b_word.push(element),hb_list[index]="BLOW"):not_word.push(element)}),history.hb_text.hit=Array.from(new Set(history.hb_text.hit.concat(h_word))),history.hb_text.blow=Array.from(new Set(history.hb_text.blow.concat(b_word))),history.hb_text.all=Array.from(new Set(history.hb_text.all.concat(not_word))),history.hb.push(hb_list),history.anser.push(game_data.anser.toString().replace(/,/g,"")),game_data.anser=["　","　","　","　","　"],game_data.now_solve.row+=1,game_data.now_solve.index=0,localStorage.setItem("now_solve",JSON.stringify(game_data.now_solve)),localStorage.setItem("history_of_hb_text",JSON.stringify(history.hb_text)),localStorage.setItem("history_of_hb",JSON.stringify(history.hb)),localStorage.setItem("history_of_anser",JSON.stringify(history.anser)),localStorage.setItem("pass_day",daily_data.pass_day),localStorage.setItem("flag",JSON.stringify({game_end:!1,game_win:!1,remain_show:flag.remain_show})),localStorage.setItem("bf_error8",!1),localStorage.setItem("tango",JSON.stringify(tango));var remaing_check_tf=!1;filter_array?remaing_check_tf=!0:alertShow("バグです。動作に一部影響が出ています。\n Error4: The number of remaining words is not defined",2e3),sleep_time=0,5==hit_count|10==game_data.now_solve.row&&(sleep_time=500,window.scroll({top:0,behavior:"smooth"})),EvaluateUpdate(game_data.now_solve.row-1,sleep_time,remaing_check_tf),ValueUpdate(),DisplayUpdate(),5==hit_count?(flag.game_end=!0,flag.game_win=!0,setTimeout(End,3e3)):10==game_data.now_solve.row&&(flag.game_end=!0,flag.game_win=!1,setTimeout(End,3e3))}}}});const EvaluateUpdate=(row,sleep_time=0,remain_tf_up=!1,dup_flag=!0)=>{RemoveSolveHighlight(row);var _row_hb=Array.from(history.hb[row]),row_text=history.anser[row],row_text_array=row_text.split(""),row_text_set=new Set(row_text_array),pr_array=tango.yomi.split(""),pr_set=new Set(pr_array);if(row_text_set.size!=row_text_array.length&&dup_flag)if(pr_set.size!=pr_array.length){var ans_dupli=serchDupli(pr_array);switch(row_text_array.length-row_text_set.size){case 1:_row_hb=Dupli_1(ans_dupli,_row_hb,row_text_array,pr_array);break;case 2:2==serchDupli(row_text_array).length?serchDupli(row_text_array).forEach(element=>{_row_hb=Dupli_1(ans_dupli,_row_hb,row_text_array,pr_array,!0,element)}):_row_hb=Dupli_2(ans_dupli,_row_hb,row_text_array,pr_array);break;default:console.log("ddNone")}}else switch(row_text_array.length-row_text_set.size){case 1:_row_hb=Dupli_1([" "],_row_hb,row_text_array,pr_array);break;case 2:2==serchDupli(row_text_array).length?serchDupli(row_text_array).forEach(element=>{_row_hb=Dupli_1([" "],_row_hb,row_text_array,pr_array,!0,element)}):_row_hb=Dupli_2([" "],_row_hb,row_text_array,pr_array);break;default:console.log("ndNone")}if(history.hb[row]=_row_hb,localStorage.setItem("history_of_hb",JSON.stringify(history.hb)),0==sleep_time)for(let i=0;i<5;i++)document.getElementById("dis-"+String(row)+"-"+String(i)).innerText=row_text[i],"HIT"==_row_hb[i]?document.getElementById("dis-"+String(row)+"-"+String(i)).classList.add("word_hit"):"BLOW"==_row_hb[i]?document.getElementById("dis-"+String(row)+"-"+String(i)).classList.add("word_blow"):document.getElementById("dis-"+String(row)+"-"+String(i)).classList.add("word_none");else setTimeout(answer_production,sleep_time,_row_hb,row,0,sleep_time,row_text);Array.from(new Set(history.hb_text.all)).forEach(element=>{document.getElementById("btn_"+element).classList.add("word_none"),document.getElementById("btn_"+element).classList.remove("AssumptionNone","AssumptionHit"),Assumption_word.hit=Assumption_word.hit.filter(item=>item!=element),Assumption_word.none=Assumption_word.none.filter(item=>item!=element)}),Array.from(new Set(history.hb_text.blow)).forEach(element=>{document.getElementById("btn_"+element).classList.remove("word_none"),Assumption_word.hit=Assumption_word.hit.filter(item=>item!=element),Assumption_word.none=Assumption_word.none.filter(item=>item!=element),document.getElementById("btn_"+element).classList.add("word_blow")}),Array.from(new Set(history.hb_text.hit)).forEach(element=>{document.getElementById("btn_"+element).classList.remove("word_none","word_blow"),Assumption_word.hit=Assumption_word.hit.filter(item=>item!=element),Assumption_word.none=Assumption_word.none.filter(item=>item!=element),document.getElementById("btn_"+element).classList.add("word_hit")}),localStorage.setItem("Assumption_word",JSON.stringify(Assumption_word)),filter_array?CheckRemaining_all(remain_tf_up):alertShow("バグです。動作に一部影響が出ています。\n Error4: The number of remaining words is not defined",2e3)},answer_production=(hb,row,index,time,row_text)=>{document.getElementById("dis-"+String(row)+"-"+String(index)).innerText=row_text[index],"HIT"==hb[index]?document.getElementById("dis-"+String(row)+"-"+String(index)).classList.add("word_hit"):"BLOW"==hb[index]?document.getElementById("dis-"+String(row)+"-"+String(index)).classList.add("word_blow"):document.getElementById("dis-"+String(row)+"-"+String(index)).classList.add("word_none"),index<4&&setTimeout(answer_production,time,hb,row,index+1,time,row_text)},serchDupli=ar=>ar.filter((function(val,idx,arr){return arr.indexOf(val)===idx&&idx!==arr.lastIndexOf(val)})),Dupli_1=(pr_du_array,HB_array,Ans_array,pre_array,du=!1,word)=>{var Du="";return Du=du?word:serchDupli(Ans_array),pre_array.includes(String(Du))?pr_du_array.includes(String(Du))?HB_array:pre_array.includes(String(Du))?"HIT"==HB_array[Ans_array.lastIndexOf(String(Du))]?(index=Ans_array.indexOf(String(Du)),HB_array[index]="NO",HB_array):(HB_array[Ans_array.indexOf(String(Du))],index=Ans_array.lastIndexOf(String(Du)),HB_array[index]="NO",HB_array):void console.log("想定外"):HB_array},Dupli_2=(pr_du_array,HB_array,Ans_array,pre_array)=>{var Du=serchDupli(Ans_array);return pre_array.includes(String(Du))?pr_du_array.includes(String(Du))?2==serchDupli(pr_du_array).length?(f_index=Ans_array.indexOf(String(Du)),m_index=Ans_array.indexOf(String(Du),f_index+1),l_index=Ans_array.lastIndexOf(String(Du)),index_list=[f_index,m_index,l_index],hb_3_list=[HB_array[index_list[0]],HB_array[index_list[1]],HB_array[index_list[2]]],HB_array[index_list[hb_3_list.lastIndexOf("BLOW")]]="NO",HB_array):pre_array.length-new Set(pre_array).size==2?HB_array:(f_index=Ans_array.indexOf(String(Du)),m_index=Ans_array.indexOf(String(Du),f_index+1),l_index=Ans_array.lastIndexOf(String(Du)),index_list=[f_index,m_index,l_index],hb_3_list=[HB_array[index_list[0]],HB_array[index_list[1]],HB_array[index_list[2]]],HB_array[index_list[hb_3_list.lastIndexOf("BLOW")]]="NO",HB_array):pre_array.includes(String(Du))?(f_index=Ans_array.indexOf(String(Du)),m_index=Ans_array.indexOf(String(Du),f_index+1),l_index=Ans_array.lastIndexOf(String(Du)),index_list=[f_index,m_index,l_index],hb_3_list=[HB_array[index_list[0]],HB_array[index_list[1]],HB_array[index_list[2]]],HB_array[index_list[hb_3_list.lastIndexOf("BLOW")]]="NO",hb_3_list[hb_3_list.lastIndexOf("BLOW")]="NO",HB_array[index_list[hb_3_list.lastIndexOf("BLOW")]]="NO",HB_array):void console.log("想定外"):HB_array},End=()=>{if(flag.game_win)if(flag.lang_en)var win_tx="You're correct";else var win_tx="正解です";else if(flag.lang_en)var win_tx="You're Incorrect";else var win_tx="不正解です";localStorage.setItem("experience",!0);var win_b_tf=JSON.parse(localStorage.getItem("flag")).game_end;win_b_tf||(history.game.try_count+=1,flag.game_win?(history.game.win_count+=1,history.game.current_streak+=1,history.game.current_streak>history.game.max_streak&&(history.game.max_streak=history.game.current_streak),history.game.history[game_data.now_solve.row-1]+=1):history.game.current_streak=0,localStorage.setItem("history_of_game",JSON.stringify(history.game)));var LS_flag={game_end:flag.game_end,game_win:flag.game_win,remain_show:flag.remain_show};localStorage.setItem("flag",JSON.stringify(LS_flag)),document.getElementById("result").innerText=win_tx,document.getElementById("result_answer").innerText=`たんご：「${tango.kanzi}」（${tango.yomi}）`,document.getElementById("result_answer").classList.remove("non_visi"),ShowHistory(history.game),mode_change("bar"),flag.game_end!=JSON.parse(localStorage.getItem("flag")).game_end&&(localStorage.setItem("flag",JSON.stringify({game_end:flag.game_end,game_win:flag.game_win,remain_show:flag.remain_show})),alertShow("バグです。動作に一部影響が出ています。\n Error7: flag is not set",2e3));var api_num=0;api_num=game_data.now_solve.row,flag.game_win||(api_num=11),console.log(api_num),!win_b_tf&history.game.try_count>1&&data_post(daily_data.pass_day,api_num)},data_post=(day,result)=>{p_t={pass_day:String(day),ans:String(result)},p_j=JSON.stringify(p_t),xhr=new XMLHttpRequest,xhr.onload=function(){var res=xhr.responseText;console.log(res)},xhr.onerror=function(){alertShow("バグです。動作に一部影響が出ています。\n Error6: API communication failed",2e3)},xhr.open("POST","https://8n0i52f399.execute-api.ap-northeast-1.amazonaws.com/default/WriteKotonohaHistory",!0),xhr.setRequestHeader("Content-Type","application/json"),xhr.send(p_j)},CreateKeybord=()=>{let $keybord=document.getElementById("keybord"),element_array=[];for(let i=0;i<10;i++)if(i>=5){5==i&&(element_array.push(document.createElement("hr")),element_array[5].setAttribute("id","keybord_hr")),element_array.push(document.createElement("div")),element_array[i+1].setAttribute("class","row bt_ga");for(let z=0;z<10;z++)element_array[i+1].appendChild(document.createElement("button")),element_array[i+1].childNodes[z].innerText=KEYBORD_LIST[i][z],"　"==KEYBORD_LIST[i][z]?(element_array[i+1].childNodes[z].setAttribute("class","space_bt"),element_array[i+1].childNodes[z].setAttribute("disabled","True")):["←","→","del"].includes(KEYBORD_LIST[i][z])?(element_array[i+1].childNodes[z].setAttribute("class","func_bt"),element_array[i+1].childNodes[z].setAttribute("onclick","FuncButton('"+KEYBORD_LIST[i][z]+"');")):(element_array[i+1].childNodes[z].setAttribute("class","key_bt"),element_array[i+1].childNodes[z].setAttribute("id","btn_"+KEYBORD_LIST[i][z]),element_array[i+1].childNodes[z].setAttribute("onclick","KeybordButton('"+KEYBORD_LIST[i][z]+"');"))}else{element_array.push(document.createElement("div")),element_array[i].setAttribute("class","row bt_normal");for(let z=0;z<10;z++)element_array[i].appendChild(document.createElement("button")),element_array[i].childNodes[z].innerText=KEYBORD_LIST[i][z],"　"==KEYBORD_LIST[i][z]?(element_array[i].childNodes[z].setAttribute("class","space_bt"),element_array[i].childNodes[z].setAttribute("disabled","True")):(element_array[i].childNodes[z].setAttribute("class","key_bt"),element_array[i].childNodes[z].setAttribute("id","btn_"+KEYBORD_LIST[i][z]),element_array[i].childNodes[z].setAttribute("onclick","KeybordButton('"+KEYBORD_LIST[i][z]+"');"))}element_array.forEach(element=>{$keybord.appendChild(element)}),wakeup_number+=1,Progress()},CreateDisplay=()=>{var $display=document.getElementById("eval_display"),element_array=[];for(let i=0;i<5;i++){element_array.push(document.createElement("div")),element_array[i].setAttribute("class","row"),element_array[i].setAttribute("id","dis-row-"+String(i));for(let z=0;z<10;z++)5==z&&(element_array[i].appendChild(document.createElement("div")),element_array[i].childNodes[z].setAttribute("class","dis-pa")),z<5?(element_array[i].appendChild(document.createElement("div")),element_array[i].childNodes[z].setAttribute("class","display_num left_display"),element_array[i].childNodes[z].setAttribute("id","dis-"+String(i)+"-"+String(z))):(lef_el=document.createElement("div"),lef_el.setAttribute("class","display_num right_display"),lef_el.setAttribute("id","dis-"+String(i+5)+"-"+String(z-5)),element_array[i].appendChild(lef_el))}element_array.forEach(element=>{$display.appendChild(element)}),wakeup_number+=1,Progress()},ShowHistory=dir=>{document.getElementById("try_count").innerText=dir.try_count,win_rate=String(Math.floor(dir.win_count/dir.try_count*100))+"%",Math.floor(dir.win_count/dir.try_count*100)||(win_rate="0%"),document.getElementById("win_rate").innerText=win_rate,document.getElementById("current_streak").innerText=dir.current_streak,document.getElementById("max_streak").innerText=dir.max_streak,Chart.defaults.plugins.legend.display=!1,labels=["1","2","3","4","5","6","7","8","9","10"],data={labels:labels,datasets:[{backgroundColor:"rgb(128,197,222)",borderColor:"rgb(128,197,222)",data:dir.history,borderWidth:0}]},config={showTooltips:!1,type:"bar",data:data,options:{responsive:!1,scales:{y:{beginAtZero:!0}}}},"A"!=myChart&&myChart.destroy(),myChart=new Chart(document.getElementById("myChart"),config)},KeybordButton=character=>{switch(KeybordButton_Mode){case"input":game_data.anser[game_data.now_solve.index]=character,game_data.now_solve.index<4&&(game_data.now_solve.index+=1),DisplayUpdate(),ValueUpdate();break;case"Assumption":var cr_key=document.getElementById("btn_"+character);cr_key.classList.contains("word_none")||(cr_key.classList.contains("AssumptionHit")?(cr_key.classList.add("AssumptionNone"),cr_key.classList.remove("AssumptionHit"),Assumption_word.none.push(character),Assumption_word.hit=Assumption_word.hit.filter(item=>item!=character)):cr_key.classList.contains("AssumptionNone")?(cr_key.classList.remove("AssumptionNone"),Assumption_word.none=Assumption_word.none.filter(item=>item!=character)):(cr_key.classList.add("AssumptionHit"),Assumption_word.hit.push(character)),localStorage.setItem("Assumption_word",JSON.stringify(Assumption_word)))}},FuncButton=key=>{var gni=game_data.now_solve.index;switch(key){case"←":gni>0&&(game_data.now_solve.index-=1,DisplayUpdate());break;case"→":gni<4&&(game_data.now_solve.index+=1,DisplayUpdate());break;case"del":"　"==game_data.anser[gni]&gni>0?(game_data.anser[gni-1]="　",game_data.now_solve.index-=1):game_data.anser[gni]="　",DisplayUpdate(),ValueUpdate();break;default:alert("バグ、もしくは不正な操作です。リロードします。\nERROR3: keyname is invalid"),location.reload()}};document.getElementById("graph_copy").addEventListener("click",element=>{var promise;navigator.clipboard.writeText(createEmoji(!1,HTML_element.remain_toggle.checked,!1))&&alertShow("クリップボードにコピー完了",500)}),document.getElementById("graph_tw").addEventListener("click",element=>{tweet_btn(!1)}),document.getElementById("graph_tw_url").addEventListener("click",element=>{tweet_btn(!0)});const tweet_btn=(url_flag,share_flag)=>{s=createEmoji(url_flag,HTML_element.remain_toggle.checked,!0,share_flag),""!=s&&(s=encodeURIComponent(s),url="https://twitter.com/intent/tweet?text="+s,window.open(url,"_blank"))};document.getElementById("graph_copy_u").addEventListener("click",element=>{var promise;navigator.clipboard.writeText(createEmoji(!1,HTML_element.remain_toggle.checked,!1,!0))&&alertShow("クリップボードにコピー完了",500)}),document.getElementById("graph_tw_u").addEventListener("click",element=>{tweet_btn(!1,!0)}),document.getElementById("graph_close").addEventListener("click",el=>{mode_change("game")});const RemainToggleChange=()=>{HTML_element.emoji_place.innerText=createEmoji(!1,HTML_element.remain_toggle.checked)},displayClick=e=>{game_data.now_solve.index=parseInt(e.target.id.slice(-1)),RemoveSolveHighlight(),SolvHighlight()},ChangeColor=(color_hit=current_color[0],color_brow=current_color[1])=>{switch(document.documentElement.style.setProperty("--hit",color_hit),document.documentElement.style.setProperty("--brow",color_brow),current_color[0]=color_hit,current_color[1]=color_brow,color_brow){case"rgb(252, 201, 72)":document.getElementById("colour_0").setAttribute("checked","");break;case"#85C0F9":document.getElementById("colour_1").setAttribute("checked","");break;case"rgb(188, 230, 163)":document.getElementById("colour_2").setAttribute("checked","")}localStorage.setItem("color",JSON.stringify(current_color))},KryTypeChange=type=>{if(curent_key_type==type)return!1;switch(document.getElementById("kt_"+type).classList.add("cuurent"),document.getElementById("kt_"+curent_key_type).classList.remove("cuurent"),curent_key_type=type,type){case"all":Array.prototype.filter.call(document.getElementsByClassName("bt_normal"),e=>{e.classList.remove("non_visi")}),Array.prototype.filter.call(document.getElementsByClassName("bt_ga"),e=>{e.classList.remove("non_visi")}),document.getElementById("keybord_hr").classList.remove("non_visi"),document.getElementById("keybord_move").classList.remove("non_visi");break;case"normal":Array.prototype.filter.call(document.getElementsByClassName("bt_normal"),e=>{e.classList.remove("non_visi")}),Array.prototype.filter.call(document.getElementsByClassName("bt_ga"),e=>{e.classList.add("non_visi")}),document.getElementById("keybord_hr").classList.add("non_visi"),document.getElementById("keybord_move").classList.remove("non_visi");break;case"ga":Array.prototype.filter.call(document.getElementsByClassName("bt_normal"),e=>{e.classList.add("non_visi")}),Array.prototype.filter.call(document.getElementsByClassName("bt_ga"),e=>{e.classList.remove("non_visi")}),document.getElementById("keybord_hr").classList.add("non_visi"),document.getElementById("keybord_move").classList.remove("non_visi");break;case"none":Array.prototype.filter.call(document.getElementsByClassName("bt_normal"),e=>{e.classList.add("non_visi")}),Array.prototype.filter.call(document.getElementsByClassName("bt_ga"),e=>{e.classList.add("non_visi")}),document.getElementById("keybord_hr").classList.add("non_visi"),document.getElementById("keybord_move").classList.add("non_visi")}},toggle_remain_show=()=>{flag.lang_en?flag.remain_show?HTML_element.remain_toggle_text.innerText="（Show）":HTML_element.remain_toggle_text.innerText="（Hide）":flag.remain_show?HTML_element.remain_toggle_text.innerText="（表示）":HTML_element.remain_toggle_text.innerText="（非表示）",flag.remain_show=!flag.remain_show,RemainShow(),localStorage.setItem("flag",JSON.stringify({game_end:flag.game_end,game_win:flag.game_win,remain_show:flag.remain_show}))},change_keybord_inout_mode=()=>{switch(mode_change("game"),KeybordButton_Mode){case"input":KeybordButton_Mode="Assumption",document.getElementById("img_write").classList.add("Assumption-btn"),document.getElementById("keybord").classList.add("Assumption-btn");break;case"Assumption":KeybordButton_Mode="input",document.getElementById("img_write").classList.remove("Assumption-btn"),document.getElementById("keybord").classList.remove("Assumption-btn")}},allNonVisi=()=>{Object.keys(HTML_element.display_mode).forEach(key=>{HTML_element.display_mode[key].classList.add("non_visi")}),Object.keys(HTML_element.icon_btn).forEach(key=>{HTML_element.icon_btn[key].setAttribute("src",icon_src[key]),HTML_element.icon_btn[key].setAttribute("onclick","mode_change('"+key+"');")})},mode_change=to_mode=>{switch(allNonVisi(),to_mode){case"hatena":case"set":SetMode(to_mode);break;case"bar":SetMode(to_mode),HTML_element.display_mode.body.classList.remove("non_visi"),HTML_element.emoji_place.innerText=createEmoji(!1,HTML_element.remain_toggle.checked);break;case"game":HTML_element.display_mode.body.classList.remove("non_visi")}},SetMode=mode=>{HTML_element.display_mode[mode].classList.remove("non_visi"),HTML_element.icon_btn[mode].setAttribute("src",icon_src.batu),HTML_element.icon_btn[mode].setAttribute("onclick","mode_change('game');")},ValueUpdate=()=>{if(!flag.game_end){var all_space=!0;game_data.anser.forEach(element=>{"　"!=element&&(all_space=!1)}),HTML_element.input_text.value=all_space?"":game_data.anser.slice(0,5).toString().replace(/,/g,"")}},SolvHighlight=(row=game_data.now_solve.row)=>{if(!flag.game_end)for(let i=0;i<5;i++)i==game_data.now_solve.index?(document.getElementById("dis-"+String(row)+"-"+String(i)).classList.add("now_solve"),document.getElementById("dis-"+String(row)+"-"+String(i)).addEventListener("click",displayClick)):(document.getElementById("dis-"+String(row)+"-"+String(i)).classList.add("row_now_solve"),document.getElementById("dis-"+String(row)+"-"+String(i)).addEventListener("click",displayClick))},RemoveSolveHighlight=(row=game_data.now_solve.row)=>{for(let i=0;i<5;i++)document.getElementById("dis-"+String(row)+"-"+String(i)).classList.remove("row_now_solve"),document.getElementById("dis-"+String(row)+"-"+String(i)).classList.remove("now_solve"),document.getElementById("dis-"+String(row)+"-"+String(i)).removeEventListener("click",displayClick)},DisplayUpdate=(row=game_data.now_solve.row)=>{flag.game_end||(RemoveSolveHighlight(),SolvHighlight(),game_data.anser.forEach((element,index)=>{document.getElementById("dis-"+String(row)+"-"+String(index)).innerText=element}))},RemainShow=(remain_num=filter_array.length)=>{flag.remain_show?flag.lang_en?HTML_element.remain.innerText=`Remaining words：${remain_num}`:HTML_element.remain.innerText=`残り候補数：${remain_num}`:flag.lang_en?HTML_element.remain.innerText="Remaining words：〇〇〇":HTML_element.remain.innerText="残り候補数：〇〇〇"},DisplayTime=()=>{var nowtime=new Date;23-parseInt(nowtime.getHours())==0&59-parseInt(nowtime.getMinutes())==0&59-parseInt(nowtime.getSeconds())==0&&(alert("日付が変わりました。単語が変わるためリロードします\nThe date has changed. Reload for word change."),location.reload());var time_left=("0"+String(23-parseInt(nowtime.getHours()))).slice(-2)+":"+("0"+String(59-parseInt(nowtime.getMinutes()))).slice(-2)+":"+("0"+String(59-parseInt(nowtime.getSeconds()))).slice(-2);flag.lang_en?document.getElementById("time_left").innerHTML="<strong>No."+String(daily_data.pass_day)+"</strong>　Next Tango："+time_left:document.getElementById("time_left").innerHTML="<strong>第"+String(daily_data.pass_day)+"回</strong> 残り時間："+time_left},alldel=()=>{Assumption_word.hit.forEach(element=>{document.getElementById("btn_"+element).classList.remove("AssumptionHit","AssumptionNone")}),Assumption_word.none.forEach(element=>{document.getElementById("btn_"+element).classList.remove("AssumptionHit","AssumptionNone")}),Assumption_word={hit:[],none:[]}},changeLang=()=>{flag.lang_en?(flag.lang_en=!1,document.getElementById("hatena").innerHTML=HATENA_TEXT_JP,document.getElementById("Decision_button").innerText="決定",document.getElementById("input_text").setAttribute("placeholder","キーボード入力用"),document.getElementById("setting").innerHTML=SET_TEXT_JP,document.getElementById("kt_all").innerText="全種",document.getElementById("kt_normal").innerText="50音",document.getElementById("kt_ga").innerText="濁点等",document.getElementById("kt_none").innerText="非表示",document.getElementById("before_tango_h2").innerText="昨日のたんご：",flag.remain_show?document.getElementById("remain_unvisi").innerText="（非表示）":document.getElementById("remain_unvisi").innerText="（表示）",change_graph_lang(["今日は正解していません","コピー","ツイート","URL付きでツイート","戦歴","プレイ<br>回数","勝率","現在の<br>連勝数","最大<br>連勝数","正解分布表示","<u>閉じる</u>","正解です","不正解です","　残り候補数推移","メモを削除","降参","結果共有URL付き","回答に利用した単語が<br>共有されます","コピー","ツイート"])):(flag.lang_en=!0,document.getElementById("hatena").innerHTML=HATENA_TEXT_EN,document.getElementById("Decision_button").innerText="decision",document.getElementById("input_text").setAttribute("placeholder","input column"),document.getElementById("setting").innerHTML=SET_TEXT_EN,document.getElementById("kt_all").innerText="All",document.getElementById("kt_normal").innerText="top half",document.getElementById("kt_ga").innerText="bottom half",document.getElementById("kt_none").innerText="hidden",document.getElementById("before_tango_h2").innerText="Yesterday たんご：",flag.remain_show?document.getElementById("remain_unvisi").innerText="（Hide）":document.getElementById("remain_unvisi").innerText="（Show）",change_graph_lang(["Not yet correct today","Copy","Tweet","Tweet with URL","STATISTICS","Play<br>times","Win%","Current<br>Streak","Max<br>Streak","GUESS DISTRIBUTION","<u>close</u>","You're correct","You're Incorrect","　transition of remaining words","Delete memo","surrender","Result with shareable URL","The words you used in<br>your answer will be shared","Copy","Tweet"])),localStorage.setItem("lang",flag.lang_en),ChangeColor(),RemainShow()},change_graph_lang=text=>{flag.game_end?flag.game_win?document.getElementById("result").innerText=text[11]:document.getElementById("result").innerText=text[12]:document.getElementById("result").innerText=text[0],document.getElementById("graph_copy").innerText=text[1],document.getElementById("graph_tw").innerText=text[2],document.getElementById("graph_tw_url").innerText=text[3],document.getElementById("history_h2").innerText=text[4],document.getElementById("his_1").innerHTML=text[5],document.getElementById("his_2").innerHTML=text[6],document.getElementById("his_3").innerHTML=text[7],document.getElementById("his_4").innerHTML=text[8],document.getElementById("gr_title").innerText=text[9],document.getElementById("graph_close").innerHTML=text[10],document.getElementById("remain_span").innerHTML=text[13],document.getElementById("bt_alldel").innerText=text[14],document.getElementById("bt_ff").innerText=text[15],document.getElementById("share_h2").innerText=text[16],document.getElementById("share_ab").innerHTML=text[17],document.getElementById("graph_copy_u").innerText=text[18],document.getElementById("graph_tw_u").innerText=text[19]},HATENA_TEXT_EN='\n<h2 id="switch_lang" onclick="changeLang();"><small><u id="switch_lang_u">日本語に切り替え</u></small></h2>\n<h2>How to play</h2>\n<p>Guess the <strong>tango(たんご)</strong> in 10 tries.</p>\n<p>Each guess must be a valid 5 letter word,<strong>"kotonoha(ことのは)"</strong></p>\n<p>After each guess, the color of the tiles will change to show evaluate the words you guessed.</p>\n<h2>Examples</h2>\n<div class="row">\n<div class="display_num word_hit">キ</div>\n<div class="display_num word_none">ョ</div>\n<div class="display_num word_hit">ウ</div>\n<div class="display_num word_none">シ</div>\n<div class="display_num word_blow">ツ</div>\n</div>\n<div style="font-size: 0.9em;">\n<p>The letter <strong class="hit_ex">「キ・ウ」</strong> is <strong class="hit_ex">in word and in the correct spot</strong>.</p>\n<p>The letter <strong class="blow_ex">「ツ」</strong> is <strong class="blow_ex">in word but in the wrong spot</strong>。</p>\n<p>The letter <strong>「ョ・シ」</strong> is not in the word.</p>\n<p>In this case, the correct tango is 「急追：キュウツイ」.</p>\n</div>\n<h2>In the beginning</h2>\n<p>I was greatly inspired by <a href="https://www.powerlanguage.co.uk/wordle/" target="_blank">Wordle</a> to create this app.</p>\n<p>This is a word guessing game that can be played once a day.</p>\n<p>The answer is the same for all users. Let\'s avoid spoilers.</p>\n<p>Due to the nature of the Japanese language, <strong>it is tremendously more difficult than Wordle</strong>.</p>\n<h2>Ver Memo function</h2>\n<p>The memo function can be turned on by clicking the pencil icon in the navigation at the top of the screen.<br>During the memo function, you can place a "Maru/Batsu" marker by clicking on the UI keyboard.</p>\n<h2>Assistance in playing and Post-production impressions<br>(Only Japanese)</h2>\n<p>＞ <a href="https://note.com/plumchloride/n/n1fcddc29b00c" target="_blank">note記事</a></p>\n<h2>About word updates and dictionary data<br>(Only Japanese)</h2>\n<p>＞ <a href="https://note.com/plumchloride/n/n8d25cad96348" target="_blank">note記事</a></p>\n<h2>About duplicate display</h2>\n<p>When you enter the <strong>kotonoha</strong> that uses two or three of the same characters, the evaluation will be displayed from the left for the number of characters included in the answer. However, this is not the case for green highlighting.</p>\n<p><strong>The correct tango is「シュウカイ」</strong></p>\n<div class="row">\n<div class="display_num word_hit">シ</div>\n<div class="display_num word_none">シ</div>\n<div class="display_num word_none">オ</div>\n<div class="display_num word_none">ド</div>\n<div class="display_num word_none">シ</div>\n</div>\n<p><strong>The correct tango is「スソナオシ」</strong></p>\n<div class="row">\n<div class="display_num word_none">シ</div>\n<div class="display_num word_none">シ</div>\n<div class="display_num word_blow">オ</div>\n<div class="display_num word_none">ド</div>\n<div class="display_num word_hit">シ</div>\n</div>\n<p><strong>The correct tango is「アカシヤキ」</strong></p>\n<div class="row">\n<div class="display_num word_blow">シ</div>\n<div class="display_num word_none">シ</div>\n<div class="display_num word_none">オ</div>\n<div class="display_num word_none">ド</div>\n<div class="display_num word_none">シ</div>\n</div>\n<p><strong>The correct tango is「シュクシャ」</strong></p>\n<div class="row">\n<div class="display_num word_hit">シ</div>\n<div class="display_num word_blow">シ</div>\n<div class="display_num word_none">オ</div>\n<div class="display_num word_none">ド</div>\n<div class="display_num word_none">シ</div>\n</div>\n<p><strong>The correct tango is「ブンシシキ」</strong></p>\n<div class="row">\n<div class="display_num word_blow">シ</div>\n<div class="display_num word_blow">シ</div>\n<div class="display_num word_none">オ</div>\n<div class="display_num word_none">ド</div>\n<div class="display_num word_none">シ</div>\n</div>\n<h2>CAUTION</h2>\n<p>Japanese has a huge number of words, so even if a word exists, it may not be registered in <strong>Kotonoha</strong>.</p>\n<p>We do not have a clear filtering system for the words in the questions. The words in this app do not contain "political, religious, sexist, or sexual" intentions.</p>\n\n<h2  id="hatena_close" style="cursor: pointer;" onclick="mode_change(\'game\');"><u>Close Description</u></h2>\n<hr>\n<div></div>\n<p><small>Tango is generated daily from a dictionary using random numbers. You can get it by analyzing the internal JavaScript, but please refrain from doing so.</small></p>\n<img alt="クリエイティブ・コモンズ・ライセンス" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />\n',HATENA_TEXT_JP='\n<h2 id="switch_lang"><small><u id="switch_lang_u" onclick="changeLang();">Switch to English</u></small></h2>\n<h2>遊び方</h2>\n<p>10回の試行で決められた5文字である1つの<strong>たんご</strong>を当てて下さい。</p>\n<p>それぞれの試行は本アプリの辞書で定められた5文字の<strong>ことのは</strong>であることが必要です。</p>\n<p>各試行のたびに文字のタイルの色が変わり、試行した単語に対して評価を行います。</p>\n<h2>評価例</h2>\n<div class="row">\n<div class="display_num word_hit">キ</div>\n<div class="display_num word_none">ョ</div>\n<div class="display_num word_hit">ウ</div>\n<div class="display_num word_none">シ</div>\n<div class="display_num word_blow">ツ</div>\n</div>\n<div style="font-size: 0.9em;">\n<p><strong class="hit_ex">「キ・ウ」</strong>はたんごに<strong class="hit_ex">含まれており場所も正しい</strong>です。</p>\n<p><strong class="blow_ex">「ツ」</strong>はたんごに含まれているが<strong class="blow_ex">場所が違います</strong>。</p>\n<p><strong>「ョ・シ」</strong>はたんごに含まれていません。</p>\n<p>この場合の正解のたんごは「急追：キュウツイ」です</p>\n</div>\n<h2>初めに</h2>\n<p>本家<a href="https://www.powerlanguage.co.uk/wordle/" target="_blank">Wordle</a>様より大きな影響を受けて日本語版の Wordle として作成しました。</p>\n<p>1日1回遊ぶことが出来る単語推理ゲームです。</p>\n<p>答えは全ユーザーで共通です。ネタバレは避けましょう</p>\n<p><strong>日本語の特性上本家Wordleよりもだいぶ難易度が高いです</strong>。</p>\n<h2>メモ機能</h2>\n<p>画面上部のナビゲーションにおける鉛筆をクリックすることでメモ機能をONにできます。<br>メモ機能中ではUIキーボードをクリックすることで「マル・バツ」の目印を設置できます。</p>\n<h2>プレイ指南書・作製後感想</h2>\n<p>＞ <a href="https://note.com/plumchloride/n/n1fcddc29b00c" target="_blank">note記事</a></p>\n<h2>単語更新・辞書データについて</h2>\n<p>＞ <a href="https://note.com/plumchloride/n/n8d25cad96348" target="_blank">note記事</a></p>\n<h2>重複表示について</h2>\n<p>同じ文字を２個、３個使う<strong>ことのは</strong>を入力した際には、答えに含まれる文字数分だけ左から評価の表示を行います。ただし緑ハイライトの場合はその限りではありません。</p>\n<p><strong>例：正解のたんごが「シュウカイ」の場合</strong></p>\n<div class="row">\n<div class="display_num word_hit">シ</div>\n<div class="display_num word_none">シ</div>\n<div class="display_num word_none">オ</div>\n<div class="display_num word_none">ド</div>\n<div class="display_num word_none">シ</div>\n</div>\n<p><strong>例：正解のたんごが「スソナオシ」の場合</strong></p>\n<div class="row">\n<div class="display_num word_none">シ</div>\n<div class="display_num word_none">シ</div>\n<div class="display_num word_blow">オ</div>\n<div class="display_num word_none">ド</div>\n<div class="display_num word_hit">シ</div>\n</div>\n<p><strong>例：正解のたんごが「アカシヤキ」の場合</strong></p>\n<div class="row">\n<div class="display_num word_blow">シ</div>\n<div class="display_num word_none">シ</div>\n<div class="display_num word_none">オ</div>\n<div class="display_num word_none">ド</div>\n<div class="display_num word_none">シ</div>\n</div>\n<p><strong>例：正解のたんごが「シュクシャ」の場合</strong></p>\n<div class="row">\n<div class="display_num word_hit">シ</div>\n<div class="display_num word_blow">シ</div>\n<div class="display_num word_none">オ</div>\n<div class="display_num word_none">ド</div>\n<div class="display_num word_none">シ</div>\n</div>\n<p><strong>例：正解のたんごが「ブンシシキ」の場合</strong></p>\n<div class="row">\n<div class="display_num word_blow">シ</div>\n<div class="display_num word_blow">シ</div>\n<div class="display_num word_none">オ</div>\n<div class="display_num word_none">ド</div>\n<div class="display_num word_none">シ</div>\n</div>\n<h2>注意</h2>\n<p>日本語は単語数が膨大なため、存在する単語でも<strong>ことのは</strong>に登録されていない可能性があります。ご了承下さい。</p>\n<p>出題単語に対するフィルタリングを明確には行っていません。本アプリにて出題される単語は「政治・宗教的・性差別・性的」な意図を含みません。</p>\n<h2 id="hatena_close" style="cursor: pointer;" onclick="mode_change(\'game\');"><u>説明を閉じる</u></h2>\n<hr>\n<div></div>\n<p><small>たんごは乱数を用いて毎日辞書より生成しています。内部のJavaScriptを解析すると取得出来ますが、そのような行動はお控え下さい。</small></p>\n<img alt="クリエイティブ・コモンズ・ライセンス" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />\n',SET_TEXT_EN='\n<h2>Color change</h2>\n<p>The resulting color of the text output will not change.</p>\n<div id="change_colour">\n<label>\n<input type="radio" id="colour_0" name="colour" value="0" onclick="ChangeColor(\'rgb(167,210,141)\',\'rgb(252, 201, 72)\')">\n<div class="colour_ex_box" style="background-color: rgb(167,210,141);"></div><div class="colour_ex_box" style="background-color: rgb(252, 201, 72);"></div>\n</label>\n<br>\n<label>\n<input type="radio" id="colour_1" name="colour" value="1" onclick="ChangeColor(\'#F5793A\',\'#85C0F9\')">\n<div class="colour_ex_box" style="background-color: #F5793A;"></div><div class="colour_ex_box" style="background-color: #85C0F9;"></div>\n</label>\n<br>\n<label>\n<input type="radio" id="colour_2" name="colour" value="2" onclick="ChangeColor(\'rgb(115, 145, 97)\',\'rgb(188, 230, 163)\')">\n<div class="colour_ex_box" style="background-color: rgb(115, 145, 97);"></div><div class="colour_ex_box" style="background-color: rgb(188, 230, 163);"></div>\n</label>\n</div>\n<br>\n<h2>Register new words</h2>\n<p>If you want to register a new word, please submit it <a href="https://docs.google.com/forms/d/e/1FAIpQLSeqAiw5vTc2a2tA2S4614rF42P4Wi-VF9tyyH6GDrmzaaaanw/viewform?usp=sf_link" target="_blank">Google Form</a>. It may take some time for the new word to be added to the dictionary, but it will be added under certain conditions.</p>\n<h2>Data initialization</h2>\n<p>Please try it out when you are unable to progress due to a bug or other problem.</p>\n<p><span style="text-decoration: underline solid blue;cursor: pointer;font-weight: bold;color: blue;" onclick="DelSet()">Deletion of settings</span>：Remove color and language settings.</p>\n<p><span style="text-decoration: underline solid blue;cursor: pointer;font-weight: bold;color: blue;" onclick="DelDay()">Data Deletion</span>：All data will be deleted, except for the statistics. Play data of the day will be deleted, but past data will not be deleted.</p>\n<h2>Bug Reports</h2>\n<p>If you encounter any bugs and want to share them, please post them <a href="https://github.com/plumchloride/tango/issues/new?assignees=&labels=bug&template=bug_report.md&title=" target="_blank">Issues on GitHub</a>.</p>\n<h2>License</h2>\n<div style="font-size: 0.9em;">\n<p>This work is licensed under the BSD License.<br>This work is also licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0) License.</p>\n<p>This work also uses software from the following author: The UniDic Consortium "UniDic-cwj_3.1.0" [<a  href = "https://ccd.ninjal.ac.jp/unidic/"target="_blank">https://ccd.ninjal.ac.jp/unidic/</a>].<br>\n"UniDic-cwj_3.1.0" is licensed under the BSD License and Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0) License.</p>\n<p>This work also uses software from the following author: 国立国語研究所(2004)『分類語彙表増補改訂版データベース』(ver.1.0)<br>国立国語研究所(2004)『分類語彙表増補改訂版データベース』(ver.1.0) is licensed under Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0) License.</p>\n</div>\n<h2>Privacy Policy</h2>\n<p>This website uses Google Analytics, a service provided by Google, Inc. This service collects, records, and analyzes the user\'s visit history. The data collected does not contain any personally identifiable information. The data collected is managed by Google.</p>\n<ul>\n<li>Google Analytics Terms of Use<br><a href="http://www.google.com/analytics/terms/jp.html" target="_blank">http://www.google.com/analytics/terms/jp.html</a></li>\n<li>Google Privacy Policy<br><a href="http://www.google.com/intl/ja/policies/privacy/" target="_blank">http://www.google.com/intl/ja/policies/privacy/</a></li>\n</ul>\n<p>Data is collected, recorded, and analyzed on this website using an API created by this website to obtain users\' response scores. The data collected is only the number of successful or unsuccessful attempts and the date of the game when the results are determined, and does not contain any personally identifiable information. The collected, recorded, and analyzed data may be made public.</p>\n<p>By using this site, you grant us permission to use and collect response data via Google Analytics, cookies, and APIs.</p>\n<h2>Other</h2>\n<p>The code can be found on GitHub below.</p>\n<p><a href="https://github.com/plumchloride/tango" target="_blank"><img id="github_img" src="https://gh-card.dev/repos/plumchloride/tango.svg"></a></p>\n\n<div class="flex_center"><small>ことのはたんご ver 5.2.2</small></div>\n<br>\n<div class="flex_center">\n<address>\n&copy; 2022 Rikito Ohnishi\n</address>\n</div>\n',SET_TEXT_JP='\n<h2>色変更</h2>\n<p>結果としてテキスト出力される色は変わりません。</p>\n<div id="change_colour">\n<label>\n<input type="radio" id="colour_0" name="colour" value="0" onclick="ChangeColor(\'rgb(167,210,141)\',\'rgb(252, 201, 72)\')">\n<div class="colour_ex_box" style="background-color: rgb(167,210,141);"></div><div class="colour_ex_box" style="background-color: rgb(252, 201, 72);"></div>\n</label>\n<br>\n<label>\n<input type="radio" id="colour_1" name="colour" value="1" onclick="ChangeColor(\'#F5793A\',\'#85C0F9\')">\n<div class="colour_ex_box" style="background-color: #F5793A;"></div><div class="colour_ex_box" style="background-color: #85C0F9;"></div>\n</label>\n<br>\n<label>\n<input type="radio" id="colour_2" name="colour" value="2" onclick="ChangeColor(\'rgb(115, 145, 97)\',\'rgb(188, 230, 163)\')">\n<div class="colour_ex_box" style="background-color: rgb(115, 145, 97);"></div><div class="colour_ex_box" style="background-color: rgb(188, 230, 163);"></div>\n</label>\n</div>\n<br>\n<h2>新規単語登録</h2>\n<p>新規単語を登録したい場合は<a href="https://docs.google.com/forms/d/e/1FAIpQLSeqAiw5vTc2a2tA2S4614rF42P4Wi-VF9tyyH6GDrmzaaaanw/viewform?usp=sf_link" target="_blank">このフォーム</a>から投稿して下さい。反映まで時間をいただくと思いますが、一定の条件のもと辞書に追加いたします。</p>\n<h2>データ初期化</h2>\n<p>バグ等で進行不能になった際に試しに利用してみてください。</p>\n<p><span style="text-decoration: underline solid blue;cursor: pointer;font-weight: bold;color: blue;" onclick="DelSet()">設定削除</span>：色や言語の設定を削除します</p>\n<p><span style="text-decoration: underline solid blue;cursor: pointer;font-weight: bold;color: blue;" onclick="DelDay()">データ削除</span>：戦歴以外のすべてのデータを削除します。当日のプレイデータは削除されますが、過去のデータは削除されません。</p>\n<h2>バグ報告</h2>\n<p>バグ等が発生し共有をしたい場合は<a href="https://github.com/plumchloride/tango/issues/new?assignees=&labels=bug&template=bug_report.md&title=" target="_blank">GitHub上のissues</a>もしくは作者の<a href="https://twitter.com/plum_chloride" target="_blank">Twitter</a>宛てにに投稿して下さい。</p>\n<h2>その他</h2>\n<p>コードに関しては以下のGitHubに掲載されています。</p>\n<p><a href="https://github.com/plumchloride/tango" target="_blank"><img id="github_img" src="https://gh-card.dev/repos/plumchloride/tango.svg"></a></p>\n<h2>その他報告</h2>\n<p>もし感想を送る場合やバグ報告の際は<a href="https://twitter.com/plum_chloride" target="_blank">こちらのTwitter</a>より連絡して下さい</p>\n<h2>ライセンス</h2>\n<div style="font-size: 0.9em;">\n<p>本アプリケーションは <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">クリエイティブ・コモンズ 表示 - 非営利 - 継承 4.0 国際 ライセンス</a>の下に提供されています。<br>本アプリケーションはくわえて、BSDライセンスの下に提供されています。</p>\n<p>また本アプリケーションは次の著作者によるソフトウェアを使用しています：The UniDic Consortium「UniDic-cwj_3.1.0」 [<a  href = "https://ccd.ninjal.ac.jp/unidic/"target="_blank">https://ccd.ninjal.ac.jp/unidic/</a>]<br>\n「UniDic-cwj_3.1.0」はBSDライセンスおよびクリエイティブ・コモンズ 表示-非営利-継承4.0 非移植(CC BY-NC-SA 4.0)のもと提供されています。</p>\n<p>また本アプリケーションは次の著作者によるソフトウェアを使用しています：国立国語研究所(2004)『分類語彙表増補改訂版データベース』(ver.1.0)<br>国立国語研究所(2004)『分類語彙表増補改訂版データベース』(ver.1.0)はクリエイティブ・コモンズ 表示-非営利-継承4.0 非移植(CC BY-NC-SA 4.0)のもと提供されています。</p>\n</div>\n<h2>プライバシーポリシー</h2>\n<p>　本ウェブサイトにおいて、利用ユーザの訪問状況を把握するためにGoogle社のサービスであるGoogle Analyticsを利用しています。このサービスによりユーザの訪問履歴を収集、記録、分析を行っています。収集されたデータに関しては個人を特定する情報は含まれません。また収集されたデータはGoogle社により管理されています。</p>\n<ul>\n<li>Google Analytics利用規約<br><a href="http://www.google.com/analytics/terms/jp.html" target="_blank">http://www.google.com/analytics/terms/jp.html</a></li>\n<li>Google プライバシーポリシー<br><a href="http://www.google.com/intl/ja/policies/privacy/" target="_blank">http://www.google.com/intl/ja/policies/privacy/</a></li>\n</ul>\n<p>　本ウェブサイトにおいて、ユーザの回答成績を取得するために本サイトが作成したAPIを用いてデータの収集、記録、分析を行います。収集するデータは結果が確定した際に、何回の試行で成功・失敗したのか及びゲームの出題日のみを取得しており、個人を特定する情報は含まれておりません。収集、集計、分析されたデータは公開する場合があります。</p>\n<p>　ユーザは、本サイトを利用することでGoogle Analytics、cookie、APIによる回答データの収集に関して使用及びに許可を与えたものとみなします。</p>\n<div class="flex_center"><small>ことのはたんご ver 5.2.2</small></div>\n<br>\n<div class="flex_center">\n<address>\n&copy; 2022 Rikito Ohnishi\n</address>\n</div>\n';$input=document.getElementById("input_text"),$input.addEventListener("input",e=>{flag.game_end||(_anser=$input.value.split(""),before_anser=[],_anser.forEach(element=>{-1==hiragana.indexOf(element)?before_anser.push(element):before_anser.push(katakana[hiragana.indexOf(element)])}),b_ans=before_anser.slice(0,5),b_ans.push("　","　","　","　","　"),game_data.anser=b_ans.slice(0,5),DisplayUpdate())});const createEmoji=(url_flag,rem_flag,twitter_flag,share_flag=!1)=>{rem_flag&&(_remain=[...history.remain],history.hb.length!=_remain.length&&(missnum=history.hb.length-_remain.length,minn_array=Array(missnum),minn_array.fill(NaN),_remain.unshift(...minn_array)));var base_text="";return twitter_flag&&(base_text+="#"),base_text+="ことのはたんご",share_flag&&(base_text+="D"),base_text+=" 第"+String(daily_data.pass_day)+"回  ",flag.game_win?base_text+=String(game_data.now_solve.row)+"/10\r\n":10==game_data.now_solve.row?base_text+="X/10\r\n":flag.game_end?base_text+="X("+String(game_data.now_solve.row)+")/10\r\n":base_text+=String(game_data.now_solve.row)+"/10\r\n",url_flag&&(base_text+="https://plum-chloride.jp/kotonoha-tango/index.html \r\n"),share_flag&&(base_text+="https://plum-chloride.jp/kotonoha-tango/share.html"+toQuery(daily_data.pass_day,history.anser,history.hb,tango.yomi)+" \r\n"),graph_text="",history.hb.forEach((Element,index)=>{index<5?(graph_text+=" \r\n",Element.forEach(e=>{graph_text+=e.replace("NO","⬜").replace("BLOW","🟨").replace("HIT","🟩")}),rem_flag&&(graph_text+=" "+String(_remain[index]))):(graph_text+=" \r\n",Element.forEach(e=>{graph_text+=e.replace("NO","⚪").replace("BLOW","🟡").replace("HIT","🟢")}),rem_flag&&(graph_text+=" "+String(_remain[index])))}),base_text+graph_text},alertShow=(text,time=1e3)=>{document.getElementById("alert").classList.remove("non_visi"),document.getElementById("alert_text").innerText=text,setTimeout(()=>{document.getElementById("alert").classList.add("non_visi")},time)},gameff=()=>{0==flag.game_end&&confirm("降参しますか？\nDo you want to surrender?")&&(localStorage.setItem("now_solve",JSON.stringify(game_data.now_solve)),localStorage.setItem("history_of_hb_text",JSON.stringify(history.hb_text)),localStorage.setItem("history_of_hb",JSON.stringify(history.hb)),localStorage.setItem("history_of_anser",JSON.stringify(history.anser)),localStorage.setItem("pass_day",daily_data.pass_day),localStorage.setItem("flag",JSON.stringify({game_end:!1,game_win:!1,remain_show:flag.remain_show})),localStorage.setItem("bf_error8",!1),localStorage.setItem("tango",JSON.stringify(tango)),flag.game_end=!0,flag.game_win=!1,setTimeout(End,0))},DelSet=()=>{confirm("設定削除を行います。よろしいでしょうか？")&&(localStorage.removeItem("color"),localStorage.removeItem("lang"),alert("削除が完了しました。リロードします。"),location.reload())},DelDay=()=>{if(confirm("データ削除を行います。\nプレイ中のデータは削除されます。よろしいでしょうか？")){if(1==flag.game_end)return void alert("ゲームがクリアされているため削除できません。");var key_len=["pass_day","history_of_hb_text","now_solve","flag","pb_forms","color","lang","bf_error8","experience","remain","Assumption_word","history_of_hb","history_of_game","history_of_anser","tango"],kl=key_len.length;alertShow("削除中です。少々お待ちください。",500*kl);for(let i=0;i<key_len.length;i++){var some_key=key_len[i];"history_of_game"!=some_key&&setTimeout(lsri,500*i,some_key),i==kl-1&&setTimeout(()=>{alert("削除が完了しました。リロードします。"),location.reload()},500*i)}}},lsri=key=>{console.log("del:"+key),localStorage.removeItem(key)},AllConsole=()=>{console.log("csv_data"),console.log(csv_data),console.log("tango"),console.log(tango),console.log("daily_data"),console.log(daily_data),console.log("wakeup_number"),console.log(wakeup_number),console.log("flag"),console.log(flag),console.log("game_data"),console.log(game_data),console.log("history"),console.log(history)};window.addEventListener("storage",(function(e){if("history_of_hb"==e.key){if(!reload)return reload=!0,alertShow("別のタブでことのはたんごが更新されました。リロードします。\n KotonohaTango has been updated in another tab. Reloading.",2e3),flag.wakeup=!1,void setTimeout(()=>{location.reload()},2e3);reload=!0}}));const even_q=["m","t","A","-j","i","Q","q","1","2","g","L","-l","-q","z","-e","P","-f","V","-g","-h","W","C","e","-i","N","D","O","k","E","F","a","s","B","u","0","R","l","h","r","I","-b","c","-k","J","H","K","Z","y","b","Y","j","v","5","4","n","3","-a","-c","-d","-m","-n","G","U","-0","8","T","9","S","d","-o","p","-p","M","w","6","f","X","x","7","o","-r"],odd_q=["w","-a","g","r","Q","h","1","A","H","-f","-d","a","U","P","I","-o","V","-p","6","W","i","D","X","4","5","l","o","E","p","q","R","B","s","K","t","T","3","0","F","j","O","k","v","G","Y","e","S","x","C","u","f","-m","2","Z","-e","b","9","J","-l","8","-r","-c","-k","7","-b","-j","c","-i","n","-h","m","N","-q","L","-g","-0","-n","d","M","y","z"],toQuery=(k,Qan,Qhb,Qy)=>{var qu="?d=";qu+=k+"&t=";var q=[];return q=Number(k)%2==0?even_q:odd_q,Qan.forEach(i=>{Array.from(i).forEach(z=>{qu+=q[katakana.indexOf(z)]})}),qu+="&a=",Array.from(Qy).forEach(i=>{qu+=q[katakana.indexOf(i)]}),qu+="&h=",Qhb.forEach(i=>{i.forEach(z=>{switch(z){case"HIT":qu+="h";break;case"BLOW":qu+="b";break;case"NO":qu+="n"}}),qu+="_"}),qu};WakeUpRequest(q_csv_path,"Q");